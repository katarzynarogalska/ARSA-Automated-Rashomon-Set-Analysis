[back](index.md)

# BuildRashomonIntersectionAutogluon

<div style="background-color: #7ea1ee7a; padding: 10px; border-radius: 4px;">
class rashomon_analysis.pipelines.pipelines_user_input.<strong>BuildRashomonIntersectionAutogluon</strong>(predictor, test_data, df_name, metrics, custom_weights, weighted_sum_method, delta, feature_imp_needed, converter_results_directory)
</div>
</br>
This i a subclass of a <code>Builder</code> abstract class, which provides pipeline for creating and exploring the Rashomon Intersection from user-provided models from AutoGluon framework.
</br>
</br>
Example usage of this pipeline can be found at <code>demo_notebooks/AutoGluon_pipeline.ipynb</code>.
</br>
</br>
</br>

<div style="background-color: lightgray; padding: 3px; border-radius: 0px;">
<strong>Parameters</strong>
</div>
</br>
    <strong>predictor</strong> : TabularPredictor </br>
     &emsp; Trained AutoGluon <code>TabularPredictor</code> object containing all models and training results.
    </br>
    <br>
    <strong>test_data</strong> : TabularDataset </br>
    &emsp; Test dataset for evaluation, must be converted to <code>TabularDataset</code> object. <br>
    &emsp; Note 1: <em> It is crucial to stratify your data while performing the train test split, so that there are no classes in test data that were not present in the train set. </em> <br>
    &emsp; Note 2 (for binary classification task): <em> It is crucial to convert binary target column labels into 0 for negative class and 1 for positive class. Otherwise, some evaluation metrics may not be calculated correctly. </em>
    </br>
    <br>
    <strong>df_name</strong> : str </br>
    &emsp; Name of the dataset used for saving the data generated by <code>PredictorConverter</code> output.
    </br>
    <br>
    <strong>metrics</strong> : list </br>
    &emsp; List of two metrics to be used in the intersection calculation.
    </br>
    <br>
    <strong>weighted_sum_method</strong> : str </br>
    &emsp; Specifies the method for selecting the base model for the Rashomon Intersection. Options are:
    <ul>
    <li><code>None</code> or <code>'entropy'</code> (default): selects the base model using an entropy-based method.</li>
    <li><code>'critic'</code>: selects the base model using a critic-based method.</li>
    <li><code>'custom_weights'</code>: selects the base model using weights provided by the user.</li>
    </ul>
    <strong>custom_weights</strong> : list </br>
    &emsp; Specifies the weights for base model selection when <code>weighted_sum_method</code> is set to <code>'custom_weights'</code>. User must specify weights in 2-element list.
    </br>
    <br>
    <strong>delta</strong> : float </br>
     &emsp; Delta parameter for probabilistic ambiguity and discrepancy (used only for binary task type). <br>
     &emsp; If not specified the default value of 0.1 will be used.
    </br>
    <br>
    <strong>feature_imp_needed</strong> : bool </br>
     &emsp; Boolean value specifying whether feature importance computation is required. <br>
     &emsp; Defaults to True; set to False to skip feature importance computation for faster execution.
     </br>
     <br>
    <strong>converter_results_directory</strong> : Path </br>
     &emsp; Path to the directory where the converter outputs will be saved. <br>
     &emsp; If <code>None</code>, a default directory <code>current_working_directory/df_name_timestamp</code> will be automatically created, where timestamp corresponds to the creation time of the converted outputs. 
     </br>
</br>
</br> 

<div style="background-color: lightgray; padding: 3px; border-radius: 0px;">
    <strong>BuildRashomonIntersectionAutogluon Pipeline – Key Steps</strong>
</div>
<br>
<ol>
    <li><strong>Initialization (<code>__init__</code>)</strong> – Convert AutoGluon <code>TabularPredictor</code> object and test data to format for Rashomon Intersection analysis.</li>
    <li><strong>Preview Rashomon (<code>preview_rashomon()</code>)</strong> – Visualize leaderboard and Rashomon Intersection sizes to guide epsilon selection.</li>
    <li><strong>Set Epsilon (<code>set_epsilon()</code>)</strong> – Set epsilon parameter value to be used when creating Rashomon Intersection.</li>
    <li><strong>Build Pipeline (<code>build()</code>)</strong> – Create RashomonIntersection, IntersectionVisualizer objects and launch the Streamlit dashboard.</li>
    <li><strong>Interactive Analysis</strong> – Explore plots via IntersectionVisualizer object or the dashboard.</li>
    <li><strong>Close Dashboard (<code>dashboard_close()</code>)</strong> – Stop Streamlit processes.</li>
</ol>
<br>

<div style="background-color: lightgray; padding: 3px; border-radius: 0px;">
<strong>Pipeline Initialization</strong>
</div>
</br>
&emsp; During initialization, the pipeline converts the user's input models into the internal format specified by <code>PredictorConverter</code> class object.  <br>
&emsp; All processed results are stored in the specified directory or in a default directory (see converter_results_directory parameter). <br>
<br>


<div style="background-color: lightgray; padding: 3px; border-radius: 0px;">
<strong>Methods</strong>
</div>
</br>

<div style="color: #3F51B5; font-size: 18px;">
    <strong>preview_rashomon()</strong>
</div>
&emsp; Method illustrating the leaderboard and the plot with all possible epsilon values and the Rashomon Intersection sizes for different epsilon values. <br>
&emsp; Should be called to guide the selection of an appropriate epsilon threshold.
</br>
</br>

<div style="color: #3F51B5; font-size: 18px;">
    <strong>visualize_rashomon_set_volume()</strong>
</div>
&emsp; Method for visualising Rashomon Intersection size depending on different epsilon values.
</br>
</br>

<div style="color: #3F51B5; font-size: 18px;">
    <strong>set_epsilon(<code>epsilon</code>)</strong>
</div>
&emsp; Sets the epsilon parameter value to be used when constructing the Rashomon Intersection object.<br>
&emsp; <strong> Epsilon value must be set before calling build() method. </strong>
</br>
</br>
&emsp; <strong>Parameters :</strong> </br>
&emsp; <code>epsilon</code> : float <br>
<br>

<div style="color: #3F51B5; font-size: 18px;">
    <strong>build(<code>launch_dashboard</code>)</strong>
</div>
&emsp;Builds the Rashomon Intersection pipeline from AutoGluon output.<br>
&emsp; Creates Rashomon Intersection object and Intersection Visualizer object from user's input and launches a Streamlit dashboard in a subprocess for interactive visualization.
</br>
</br>
&emsp; This method performs the following steps:
<ul>
<li>Validates that the epsilon threshold has been set using <code>set_epsilon()</code> method.</li><br>
<li>Creates the <code>RashomonIntersection</code> object based on the leaderboard, predictions, probability predictions, feature importances, metrics, methods to select base model, and epsilon threshold. <br>
All inputs required to build the Rashomon Intersection object are extracted from the user's data, which is processed and converted during the pipeline initialization.</li><br>
<li>Initializes the <code>IntersectionVisualizer</code> object for interactive analysis of the Rashomon Intersection. <br>
Individual plots can later be generated directly from the <code>IntersectionVisualizer</code> object.</li><br>
<li>If <code>launch_dashboard</code> is set to True (default) it generates plots for analysis depending on the task type (binary or multiclass), and stores them temporarily with their descriptions for the Streamlit dashboard. It closes any previous Streamlit processes to avoid conflicts.</li><br>
<li>If <code>launch_dashboard</code> is set to True (default) it launches the Streamlit dashboard in a subprocess on the local machine (localhost), allowing interactive exploration of the Rashomon Intersection properties without blocking the main workflow.</li>

</ul>
</br>
&emsp; <strong>Returns :</strong> </br>
&emsp; <code>rashomon_set</code> : RashomonIntersection
</br>
&emsp; <code>visualizer</code> : IntersectionVisualizer
</br>
</br>

<div style="color: #3F51B5; font-size: 18px;">
    <strong>dashboard_close()</strong>
</div>
&emsp; Method for stopping all Streamlit processes and closing the dashboard.<br>
&emsp; Note: <em>Always call this method after finishing the analysis to ensure the dashboard is properly closed.</em>

<br>



