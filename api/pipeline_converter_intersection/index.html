
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
        <link rel="canonical" href="https://katarzynarogalska.github.io/ARSA-Automated-Rashomon-Set-Analysis/api/pipeline_converter_intersection/">
      
      
      
      
        
      
      
      <link rel="icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.7.0">
    
    
      
        <title>Pipeline converter intersection - ARSA Documentation</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.618322db.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.ab4e12ef.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#buildintersectionfromconverted" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="ARSA Documentation" class="md-header__button md-logo" aria-label="ARSA Documentation" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            ARSA Documentation
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Pipeline converter intersection
            
          </span>
        </div>
      </div>
    </div>
    
      
    
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="ARSA Documentation" class="md-nav__button md-logo" aria-label="ARSA Documentation" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    ARSA Documentation
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Home page
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Documentation
  

    
  </span>
  
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              
              <article class="md-content__inner md-typeset">
                
                  



<p><a href="../">back</a></p>
<h1 id="buildintersectionfromconverted">BuildIntersectionFromConverted</h1>
<div style="background-color: #c2deb1; padding: 10px; border-radius: 4px;">
class rashomon_analysis.pipelines.pipelines_from_converters.<strong>BuildIntersectionFromConverted</strong>(converter_results_path, metrics, custom_weights, weighted_sum_method, delta)
</div>
<p></br>
This is a subclass of the <code>Builder</code> abctract class, which provides pipeline for creating and exploring the Rashomon Intersection created from parameters in a format propsed by the convert() method of converter classes.
</br>
</br>
Example usage of this pipeline can be found at <code>demo_notebooks/converters_pipeline.ipynb</code>.
</br>
</br>
</br></p>
<div style="background-color: lightgray; padding: 3px; border-radius: 0px;">
<strong>Parameters</strong>
</div>
<p></br>
    <strong>converter_results_path</strong> : Path </br>
     &emsp;  Path to a folder where all necessary files are stored. Obligatory files to be included in this folder are:
    </br>
    &emsp; 1. leaderboard.csv : file containing all trained models and their evaluation metrics scores.<br>
    &emsp; 2. y_true.csv: target column from test dataset.<br>
    &emsp; 3. predictions_dict.pkl : dictionary with model names as keys and their class prediction vectors as values.<br>
    &emsp; 4. proba_predictions.pkl : dictionary with model names as keys and their probabilities predictions as values.<br>
    &emsp; 5. (optional) feature_importance_dict.pkl : dictionary with model names as keys and their features sorted descending by their feature importance as values. <br>
    </br>
    If you do not have the necessary files, please visit documentation of the pipelines accepting raw models as input:</p>
<p><a href="../pipeline_user_input_rashomon_H2O/">H2O pipeline</a> <br>
<a href="../pipeline_user_input_rashomon_autogluon/">AutoGluon pipeline</a> <br>
<br>
    <strong>metrics</strong> : list </br>
    &emsp; Evaluation metrics to be used as the <code>metrics</code> list while creating the Rashomon Intersection.
    </br>
    <strong>custom_weights</strong> : list </br>
    &emsp; List containing two values of custom weights assigned by the user to every evaluation metric present in the <code>metrics</code> list. Can be set only while using the <code>'custom_weights'</code> weighted sum method. Default is None.
    </br>
    <strong>weighted_sum_method</strong> : str </br>
    &emsp; Name of the <code>weighted_sum_method</code> to be used while selecting the <code>base_model</code> in the Rashomon Intersection. Possible options are 'entropy','critic', 'custom_weights'. Default is 'entropy'.
    </br>
    <strong>delta</strong> : float </br>
     &emsp; Delta parameter for probabilistic ambiguity and discrepancy (used only for binary task type). <br>
     &emsp; If not specified the default value of 0.1 will be used.
</br>
</br> </p>
<div style="background-color: lightgray; padding: 3px; border-radius: 0px;">
    <strong>BuildRashomonFromConverted Pipeline – Key Steps</strong>
</div>
<p><br></p>
<ol>
    <li><strong>Initialization (<code>__init__</code>)</strong> – Evaluation of the given arguments. If the provided folder contains all necessary files the Pipeline is initialized.</li>
    <li><strong>Preview Rashomon (<code>preview_rashomon()</code>)</strong> – Visualize leaderboard and Rashomon Intersection sizes to guide epsilon selection.</li>
    <li><strong>Set Epsilon (<code>set_epsilon()</code>)</strong> – Set epsilon parameter value to be used when creating the Rashomon Intersection.</li>
    <li><strong>Build Pipeline (<code>build()</code>)</strong> – Create RashomonIntersection and IntersectionVisualizer objects and launch the Streamlit dashboard in the background.</li>
    <li><strong>Interactive Analysis</strong> – Explore plots via returned IntersectionVisualizer object or the dashboard.</li>
    <li><strong>Close Dashboard (<code>dashboard_close()</code>)</strong> – Stop Streamlit processes.</li>
</ol>

<div style="background-color: lightgray; padding: 3px; border-radius: 0px;">
<strong>Methods</strong>
</div>
<p></br></p>
<div style="color: #60824f; font-size: 18px;">
    <strong>preview_rashomon()</strong>
</div>
<p>&emsp; Method illustrating the leaderboard and the plot with all possible epsilon values and the Rashomon Intersection sizes for different epsilon values. <br>
&emsp; Should be called to guide the selection of an appropriate epsilon threshold.
</br>
</br></p>
<div style="color: #60824f; font-size: 18px;">
    <strong>visualize_rashomon_set_volume()</strong>
</div>
<p>&emsp; Method for visualising Rashomon Intersection size depending on different epsilon values.
</br>
</br></p>
<div style="color: #60824f; font-size: 18px;">
    <strong>set_epsilon(<code>epsilon</code>)</strong>
</div>
<p>&emsp; Sets the epsilon parameter value to be used when constructing the Rashomon Intersection object.<br>
&emsp; <strong> Epsilon value must be set before calling build() method. </strong>
</br>
</br>
&emsp; <strong>Parameters :</strong> </br>
&emsp; <code>epsilon</code> : float <br>
<br></p>
<div style="color: #60824f; font-size: 18px;">
    <strong>build(<code>lanuch_dashboard</code>)</strong>
</div>
<p>&emsp;Builds the Rashomon Intersection pipeline from converted files found in the given directory and other provided parameters. <br>
&emsp; Creates Rashomon Intersection object and IntersectionVisualizer object from user's input and launches a Streamlit dashboard in a subprocess for interactive visualization if <code>launch_dashboard</code> parameter is set to True.
</br>
</br>
&emsp; This method performs the following steps:</p>
<ul>
<li>Validates that the epsilon threshold has been set using <code>set_epsilon()</code> method.</li><br>
<li>Creates the <code>RashomonIntersection</code> object based on the leaderboard, predictions, probability predictions, feature importances, metrics, methods to select base model, and epsilon threshold. <br>
<li>Initializes the <code>IntersectionVisualizer</code> object for interactive analysis of the Rashomon Intersection. <br>
Individual plots can later be generated directly from the <code>IntersectionVisualizer</code> object.</li><br>
<li>If <code>launch_dashboard</code> is set to True (default) it generates plots for analysis depending on the task type (binary or multiclass), and stores them temporarily with their descriptions for the Streamlit dashboard. It closes any previous Streamlit processes to avoid conflicts.</li><br>
<li>If <code>launch_dashboard</code> is set to True (default) it launches the Streamlit dashboard in a subprocess on the local machine (localhost), allowing interactive exploration of the Rashomon Intersection properties without blocking the main workflow.</li>

</ul>
<p></br>
&emsp; <strong>Returns :</strong> </br>
&emsp; <code>rashomon_intersection</code> : RashomonIntersection
</br>
&emsp; <code>visualizer</code> : IntersectionVisualizer
</br>
</br></p>
<div style="color: #60824f; font-size: 18px;">
    <strong>dashboard_close()</strong>
</div>
<p>&emsp; Method for stopping all Streamlit processes and closing the dashboard.<br>
&emsp; Note: <em>Always call this method after finishing the analysis to ensure the dashboard is properly closed.</em></p>
<p><br></p>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      
      <script id="__config" type="application/json">{"annotate": null, "base": "../..", "features": [], "search": "../../assets/javascripts/workers/search.7a47a382.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="../../assets/javascripts/bundle.e71a0d61.min.js"></script>
      
        <script src="../../javascripts/mathjax.js"></script>
      
        <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
      
        <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
      
    
  </body>
</html>